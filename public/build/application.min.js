/**!
 * @Project: angular-course
 * @Authors: Hitmands <gius.mand.developer@gmail.com>
 * @Link: https://github.com/EsisSrL/angular-course
 * @License: MIT
 * @Date: 2015-03-27
 * @Version: 1.0.0
 * 
 * @ngdoc: module
 * @namespace: esis
 * @name: angular-course
 * @module: esis.angular-course
 * @description: Course on AngularJS.
***/

!function(a,b){"use strict";(function(){function c(a,b,c){a.debugInfoEnabled(!0),b.html5Mode(!0),c.rule(function(a,b){var c=b.url();return"/"===c[c.length-1]||c.indexOf("/?")>-1?void 0:c.indexOf("?")>-1?c.replace("?","/?"):c+"/"})}function d(b,c,d,e,f,g){b.$state=c,b.$stateParams=d,a.AuthService=e,a.$http=f,a.$state=c,a.$injector=g.get}c.$inject=["$compileProvider","$locationProvider","$urlRouterProvider"],d.$inject=["$rootScope","$state","$stateParams","AuthService","$http","$injector"];var e=["esis.angular-course.ui","esis.angular-course.errors","esis.angular-course.users","esis.angular-course.store","esis.angular-course.api","ui.router","hitmands.auth","ngSanitize"];b.module("esis.angular-course",e).config(c).run(d)}).call(this),function(){function c(a){a.useRoutes({login:"/api/v1/users/login",logout:"/api/v1/users/logout",fetch:"/api/v1/users/current"}).tokenizeHttp().parseHttpAuthData(function(a){return{user:a.user,token:a.token,authLevel:a.authLevel}});var b=e.read();b&&a.setLoggedUser(b.user,b.token,b.authLevel)}function d(a,b){b.currentUser=a.getCurrentUser(),b.isUserLoggedIn=a.isUserLoggedIn(),b.$on("hitmands.auth:update",function(){b.currentUser=a.getCurrentUser(),b.isUserLoggedIn=a.isUserLoggedIn(),b.isUserLoggedIn||e.unstore()}),b.$on("hitmands.auth:login.resolved",function(a,b){e.store(b.data)}),b.$on("hitmands.auth:fetch.resolved",function(a,b){e.store(b.data)})}c.$inject=["AuthServiceProvider"],d.$inject=["AuthService","$rootScope"];var e={_key:"Esis.Angular-Course.user.session",store:function(c){this.unstore();var d=!1;try{a.sessionStorage.setItem(this._key,b.toJson(c)),d=!0}catch(e){}return d},unstore:function(){var b=!1;try{a.sessionStorage.removeItem(this._key),b=!0}catch(c){}return b},read:function(){var c;try{c=b.fromJson(a.sessionStorage.getItem(this._key))}catch(d){}return c}};b.module("hitmands.auth").config(c).run(d)}.call(this),function(){function a(){}function c(){}var d=["esis.angular-course","ui.router"];b.module("esis.angular-course.ui",d).config(a).run(c)}.call(this),function(){function a(a){var b={name:"app",url:"^/","abstract":!0,data:{},views:{header:{templateUrl:"/partials/ui/header-base.html",controller:"UICtrl"},sidebar:{templateUrl:"/partials/ui/sidebar-base.html",controller:"UICtrl"},main:{templateUrl:"/partials/ui/main-base.html",controller:"UICtrl"},footer:{templateUrl:"/partials/ui/footer-base.html",controller:"UICtrl"}}},c={name:"app.index",url:""};a.state(b).state(c)}function c(a,b,c){a.courseName="AngularJS Course",a.summary="/partials/ui/includes/summary.html",a.summarySectionId="angular-summary",a.apiSectionId="api-documentation",a.goToApi=function(d){d.preventDefault(),"app.index"!==c.current.name?c.go("app.index").then(function(){b.hash(a.apiSectionId)}):b.hash(a.apiSectionId)},a.goToSummary=function(d){d.preventDefault(),"app.index"!==c.current.name?c.go("app.index").then(function(){b.hash(a.summarySectionId)}):b.hash(a.summarySectionId)},a.esisLink="http://www.esis-italia.com/",a.esisLogo="http://www.esis-italia.com/wp-content/uploads/2013/07/LOGO-ESIS6.png",a.trainer="Giuseppe Mandato",a.trainerLink="http://it.linkedin.com/in/giuseppemandato"}a.$inject=["$stateProvider"],c.$inject=["$scope","$location","$state"],b.module("esis.angular-course.ui").config(a).controller("UICtrl",c)}.call(this),function(){function a(a,b){a.otherwise(function(a,b){return"/errors/404"});var c={name:"app.errors",url:"errors/","abstract":!0,data:{}};b.state(c)}function c(){}a.$inject=["$urlRouterProvider","$stateProvider"],c.$inject=["$rootScope"];var d=["esis.angular-course"];b.module("esis.angular-course.errors",d).config(a).run(c)}.call(this),function(){function a(a){var b={name:"app.errors.404",url:"404/",views:{"main@":{controllerAs:"error",templateUrl:"/partials/errors/Error404.html",controller:"Error404Ctrl"}}};a.state(b)}function c(){var a=this;a.text="This is not the web page you are looking for",a.code=404}a.$inject=["$stateProvider"],b.module("esis.angular-course.errors").config(a).controller("Error404Ctrl",c)}.call(this),function(){function a(){}function c(){}c.$inject=["$rootScope"];var d=["hitmands.auth","esis.angular-course"],e={};e.ROLES={"public":["public"],customer:["public","customer"],manager:["public","customer","manager"],admin:["public","customer","manager","admin"]},b.module("esis.angular-course.users",d).constant("USERS",e).config(a).run(c)}.call(this),function(){function a(a,b){var d=this;d.create=function(d){var e={};return b.post("/api/v1/users/",d,e).then(function(a){return new c(a.data)},function(b){return a.reject(b)})}}a.$inject=["$q","$http"];var c=function(){function a(a){this.firstName=a.firstName,this.lastName=a.lastName,this.username=a.username,this.role=a.role,this.country=a.country,this.email=a.email}return a}.call(this);b.module("esis.angular-course.users").service("UserService",a)}.call(this),function(){function a(a){var b={name:"app.users.delete",url:"delete/",data:{},views:{"main@":{templateUrl:"partials/users/DeleteUser.html",controller:"DeleteUserCtrl"}}};a.state(b)}function c(){}a.$inject=["$stateProvider"],b.module("esis.angular-course.users").config(a).controller("DeleteUserCtrl",c)}.call(this),function(){function a(a){var b={name:"app.users",url:"users/","abstract":!0,data:{},views:{"main@":{templateUrl:"/partials/users/Login.html",controller:"LoginCtrl"}}},c={name:"app.users.login",url:"login/"};a.state(b).state(c)}function c(a){a.formState=0,a.credentials={username:"",password:"",rememberMe:!1},a.onLoginDone=function(b){a.formState=0},a.onLoginFail=function(b){a.formState=2}}a.$inject=["$stateProvider"],c.$inject=["$scope"],b.module("esis.angular-course.users").config(a).controller("LoginCtrl",c)}.call(this),function(){function a(a){var b={name:"app.users.new",url:"new/",data:{},views:{"main@":{controllerAs:"user",templateUrl:"/partials/users/NewUser.html",controller:"NewUserCtrl"}}};a.state(b)}function c(a,c,d){var e=this;e.roles=[],e.formState=0,e.fields={username:"",password:"",country:"",role:"",email:"",firstName:"",lastName:""};try{e.roles=Object.keys(c.ROLES)}catch(f){}e.fields.role=e.roles[0],e.create=function(a,c){e.formState=0,a.preventDefault(),c.$invalid||c.$pristine;var f=b.copy(e.fields);d.create(f).then(function(a){e.formState=1},function(a){e.formState=2})}}a.$inject=["$stateProvider"],c.$inject=["$scope","USERS","UserService"],b.module("esis.angular-course.users").config(a).controller("NewUserCtrl",c)}.call(this),function(){function a(a){var b={name:"app.users.list",url:"list/",data:{},views:{"main@":{templateUrl:"partials/users/UsersList.html",controller:"UsersListCtrl"}}};a.state(b)}function c(){}a.$inject=["$stateProvider"],b.module("esis.angular-course").config(a).controller("UsersListCtrl",c)}.call(this),function(){function a(a){var b={name:"app.store",url:"store/","abstract":!0,data:{}};a.state(b)}function c(){}a.$inject=["$stateProvider"];var d=["esis.angular-course","ui.router"];b.module("esis.angular-course.store",d).config(a).run(c)}.call(this),function(){function a(a,b){var d=this;d.loadProducts=function(){return b.get(c+"products").then(function(a){return a.data||[]},function(b){return a.reject(b)})},d.loadCategories=function(){return b.get(c+"categories").then(function(a){return a.data||[]},function(b){return a.reject(b)})},d.loadOrders=function(){return b.get(c+"orders").then(function(a){return a.data||[]},function(b){return a.reject(b)})}}a.$inject=["$q","$http"];var c="/api/v1/store/";b.module("esis.angular-course.store").service("StoreService",a)}.call(this),function(){function a(a){var b={name:"app.store.cart",url:"cart/",data:{},views:{"main@":{templateUrl:"partials/store/Cart.html",controller:"CartCtrl"}}};a.state(b)}function c(){}a.$inject=["$stateProvider"],b.module("esis.angular-course.store").config(a).controller("CartCtrl",c)}.call(this),function(){function a(a){var b={name:"app.store.orders",url:"orders/",data:{},views:{"main@":{templateUrl:"partials/store/Orders.html",controller:"OrdersCtrl"}}};a.state(b)}function c(){}a.$inject=["$stateProvider"],b.module("esis.angular-course.store").config(a).controller("OrdersCtrl",c)}.call(this),function(){function a(a){var b={name:"app.store.index",url:"",views:{"main@":{controllerAs:"product",templateUrl:"partials/store/Products.html",controller:"OrdersCtrl"}}};a.state(b)}function c(a,b){var c=this;b.loadProducts().then(function(b){c.list=b;try{a.orderProps=Object.keys(b[0])}catch(d){}},function(a){}),b.loadCategories().then(function(a){c.categories=a},function(a){}),c.addToCart=function(){},a.query="",a.onQueryChange=function(){},a.currentOrderProp=null,a.setOrderProp=function(b,c){a.currentOrderProp=c},a.resetOrderProp=function(){a.currentOrderProp=null}}a.$inject=["$stateProvider"],c.$inject=["$scope","StoreService"],b.module("esis.angular-course.store").config(a).controller("OrdersCtrl",c)}.call(this),function(){function a(){}function c(){}c.$inject=["$rootScope"];var d=["esis.angular-course"];b.module("esis.angular-course.api",d).config(a).run(c)}.call(this),function(){function a(a){return{restrict:"EA",templateUrl:"/partials/api/ApilistDirective.html",link:function(b){b.endpoints=[],a.get("/api/v1/documentation").then(function(a){b.endpoints=a.data})}}}a.$inject=["$http"],b.module("esis.angular-course.api").directive("apilist",a)}.call(this)}(window,angular);
